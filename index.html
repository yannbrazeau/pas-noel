<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Pas NoÃ«l ğŸ­</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  font-family:system-ui;
  background:#0f172a;
  color:#fff;
  margin:0;
  padding:20px;
  text-align:center;
}
.card{
  max-width:500px;
  margin:auto;
  background:rgba(255,255,255,.06);
  padding:24px;
  border-radius:20px;
}
input,button{
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
  margin-top:10px;
  width:100%;
}
button{
  background:#22c55e;
  color:#000;
  font-weight:700;
  cursor:pointer;
}
.secondary{background:#38bdf8}
.danger{background:#f97316}
.timer{font-size:36px;font-weight:800;margin:10px}
.mission{font-size:20px;margin:16px}
.small{opacity:.8;font-size:14px;margin-top:6px}
.hidden{display:none}
.row{display:flex;gap:10px;margin-top:10px}
.podium{font-size:22px;margin-top:12px}
</style>
</head>

<body>

<!-- START -->
<div class="card" id="start">
  <h1>ğŸ­ Pas NoÃ«l</h1>
  <input id="name" placeholder="Ton prÃ©nom">
  <button onclick="createGame()">CrÃ©er une partie</button>
  <input id="codeInput" placeholder="Code de partie">
  <button class="secondary" onclick="joinGame()">Rejoindre</button>
</div>

<!-- GAME -->
<div class="card hidden" id="game">
  <h2 id="title"></h2>
  <div class="small">Mission <span id="round"></span> / 100</div>
  <div class="timer" id="timer">01:00</div>
  <div class="mission" id="mission"></div>
  <div class="small">ğŸš« Mot interdit : <b id="banned"></b></div>
  <div class="small">ğŸ­ Mode : <b id="mode"></b></div>
  <div class="small">ğŸ† Score : <b id="score">0</b></div>

  <div class="row">
    <button onclick="vote(true)">ğŸ”¥ RÃ©ussi</button>
    <button class="danger" onclick="vote(false)">ğŸ˜… RatÃ©</button>
  </div>

  <div class="row">
    <button class="danger" onclick="penalty()">ğŸš« Mot interdit</button>
    <button class="secondary" onclick="chaos()">ğŸƒ Chaos</button>
  </div>
</div>

<!-- END -->
<div class="card hidden" id="end">
  <h1>ğŸ‰ Fin de partie</h1>
  <div class="podium" id="podium"></div>
  <button onclick="restart()">ğŸ”„ Revanche</button>
</div>

<script>
/* ===== DATA ===== */
const BASE_MISSIONS=[
"Fais rire quelquâ€™un sans parler",
"Fais dire Â« dâ€™accord Â» Ã  quelquâ€™un",
"Fais croire que tu travailles ici",
"Explique un objet banal comme sâ€™il Ã©tait rÃ©volutionnaire",
"Fais deviner un film sans les mains",
"Complimente quelquâ€™un sur un dÃ©tail improbable",
"Fais un discours trÃ¨s solennel pour rien",
"Fais croire que tu annonces une grande nouvelle",
"Agis comme si tu Ã©tais observÃ©",
"Fais participer quelquâ€™un Ã  ta mission"
];
while(BASE_MISSIONS.length<100){
  BASE_MISSIONS.push(BASE_MISSIONS[BASE_MISSIONS.length%10]+" (variante)");
}
const BANNED=["sapin","cadeau","bÃ»che","famille","renne","dinde"];
const MODES=["agent secret","robot","ASMR","sans sourire","trÃ¨s sÃ©rieux"];

/* ===== STATE ===== */
let name="",code="",index=0,score=0,timer=null,chaosUsed=false;

/* ===== UTILS ===== */
function rand(arr,seed){
 let h=0;
 for(let c of seed) h=Math.imul(31,h)+c.charCodeAt(0)|0;
 return arr[Math.abs(h)%arr.length];
}
function randCode(){return String(Math.floor(1000+Math.random()*9000))}
function show(id){
 document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}
function format(s){return"00:"+String(s).padStart(2,"0")}

/* ===== FLOW ===== */
function createGame(){
 name=document.getElementById("name").value||"Joueur";
 code=randCode(); start();
}
function joinGame(){
 name=document.getElementById("name").value||"Joueur";
 code=document.getElementById("codeInput").value;
 if(code.length!==4)return alert("Code invalide");
 start();
}
function start(){
 show("game");
 document.getElementById("title").textContent=`ğŸ­ ${name} â€” Code ${code}`;
 loadMission();
}
function loadMission(){
 if(index>=100){endGame();return;}
 document.getElementById("round").textContent=index+1;
 document.getElementById("mission").textContent=rand(BASE_MISSIONS,code+name+index);
 document.getElementById("banned").textContent=rand(BANNED,code+index);
 document.getElementById("mode").textContent=rand(MODES,name+index);
 startTimer(60);
}
function startTimer(sec){
 clearInterval(timer);
 let left=sec;
 document.getElementById("timer").textContent=format(left);
 timer=setInterval(()=>{
  left--;
  document.getElementById("timer").textContent=format(left);
  if(left<=0){clearInterval(timer);index++;loadMission();}
 },1000);
}
function vote(ok){
 if(ok)score++;
 document.getElementById("score").textContent=score;
 index++; loadMission();
}
function penalty(){
 score--; document.getElementById("score").textContent=score;
 alert("ğŸš« Mot interdit ! -1 point");
}
function chaos(){
 if(chaosUsed)return alert("Chaos dÃ©jÃ  utilisÃ© !");
 chaosUsed=true;
 document.getElementById("mission").textContent=
  rand(BASE_MISSIONS,Math.random().toString());
}
function endGame(){
 show("end");
 document.getElementById("podium").innerHTML=
  `ğŸ¥‡ <b>${name}</b><br>Score final : <b>${score}</b><br><br>Moment culte garanti ğŸ˜„`;
}
function restart(){location.reload()}
</script>

</body>
</html>
